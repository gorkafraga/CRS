# Load required packages
library(shiny)
library(DT)

# Define UI for the app
ui <- fluidPage(
  titlePanel("Read Data from csv File"),
  sidebarLayout(
    sidebarPanel(
      actionButton("refreshButton", "Refresh Data")
    ),
    mainPanel(
      DTOutput("data_table")
    )
  )
)

# Define server logic
server <- function(input, output, session) {
  # Create a reactiveValues object to hold the data
  data <- reactiveValues(table_data = NULL)
  
  # Function to read data from CSV file
  read_data <- function() {
    tryCatch({
      data$table_data <- read.csv('Metadata_filenames_html.csv')  # Replace with your file path
    }, error = function(e) {
      cat("Error reading CSV file:", conditionMessage(e), "\n")
    })
  } 
  # Initial data read
  read_data()
  
  # Observe the refresh button click
  observeEvent(input$refreshButton, {
    read_data()
  })
  
  # Render the data table
  output$data_table <- DT::renderDataTable({
    datatable(
     data$table_data,escape=FALSE
   )
  })
}

# Run the Shiny app
shinyApp(ui, server)
